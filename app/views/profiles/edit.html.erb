<!-- app/views/profiles/edit.html.erb -->
<div class='overflow-scroll top-wrapper'>
  <div class="p-6 mx-auto my-auto mt-8 bg-white rounded-lg shadow-lg max-w-screen-lg">
    <div class="flex justify-center mb-4 text-4xl font-bold text-slate-600">
      編集画面
    </div>

    <%= form_with model: @user, url: profile_path, local: true do |f| %>
      <div class="mt-3 mb-3 form-group">
        <%= f.label :image, '画像(5MB以下)' %><br>
        <%= f.file_field :image, onchange: "avatarImage(this);" %>
      </div>
      <!------ 添付画像のプレビューを表示 ------>
      <div id="avatar" >
        <img id="avatar_preview" class="mb-3" width="200">
      </div>

      <div class="mt-3 mb-3 form-group">
        <%= f.label :name, '名前', class:"text-lg pb-2" %>
        <%= f.text_field :name, class:"w-full rounded-lg border border-slate-700" %>
      </div>
      <div class="mt-3 mb-3 form-group">
        <%= f.label :email, 'メールアドレス', class:"text-lg pb-2" %>
        <%= f.email_field :email, class:"w-full rounded-lg border border-slate-700" %>
      </div>
      <div class="flex justify-center">
        <%= f.submit '変更', class: 'text-lg border-2 border-red-500 rounded-lg text-red-500 shadow-lg mb-7 hover:bg-red-500 hover:text-white text-center py-1 px-3 hover:border-transparent rounded' %>
      </div>
      <% end %>
    </div>
  </div>
</div>

<!------ プレビュー表示用の JavaScript ------->
<script>
  function avatarImage(obj){
      var fileReader = new FileReader();
      fileReader.onload = (function() {
        document.getElementById('avatar_preview').src = fileReader.result;
      });
      fileReader.readAsDataURL(obj.files[0]);
  }
</script>
